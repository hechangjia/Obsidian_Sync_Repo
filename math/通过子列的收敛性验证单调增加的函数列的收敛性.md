---
tags:
  - math
  - 概率论
---

> [!命题1]
> $A_1,\cdots,A_n,\cdots$是概率空间当中一组两两互相独立的事件，并且满足$$\sum_{n\geq 1}P(A_n)=\infty$$那么$$\frac{\sum_{n\leq N}1_{A_n}(\omega)}{\sum_{n\leq N}P(A_n)}\xrightarrow{a.e.}1$$其中函数列$1_{A_n}(\omega)$是事件的特征函数列（集合里面的取1,否则函数值取0）。

这里有两个思考：
1. 问题涉及关于一系列集合的测度的问题的分析，按照[[把集合问题转换为函数问题]]当中的理解，我们可以把分母看成是特征函数关于概率测度的积分。也就是说命题1当中的收敛，我们可以完全看成是$$f_N(\omega):=\frac{S_N(\omega)}{E(S_N)}$$的收敛问题。其中$S_N(\omega):=\sum_{n\leq N}1_{A_n}(\omega)$。
2. 根据[[加强收敛性质的条件与手段]]当中的想法，我可以首先考察序列$f_N(\omega)$是否依测度收敛(此条件更容易达成)，然后转而依赖Borel-Cantelli引理来加强收敛性到几乎处处收敛。

### 1. 验证依测度(概率)收敛

我们要验证的是$f_N(\omega)$这个函数列是否依测度收敛到$1$。也就是说我们要验证对任意的$\varepsilon>0$使得集合$$\{\omega:|f_N(\omega)-1|\geq \varepsilon\}=\left\{\omega:\left|\frac{S_N(\omega)}{E(S_N)}\right|\geq \varepsilon\right\}$$然后稍微改变一下形式，我们可以就是要估计$$P\left(\left\{\omega:\left|S_N(\omega)-E(S_N)\right|\geq \varepsilon E(S_N) \right\}\right)$$这非常显然，我们会使用Chebyshev不等式去进行估计，毕竟已经出现非常熟悉的函数$S_N(\omega)$以及函数的均值$E(S_N)$二者之间的差值的测度的估计了。于是：$$\begin{aligned}P\left(\left\{\omega:\left|S_N(\omega)-E(S_N)\right|\geq \varepsilon E(S_N) \right\}\right)&\leq \frac{V(S_N)}{\varepsilon^2E(S_N)^2} \\ &\leq \frac{E(S_N)}{\varepsilon^2E(S_N)^2}\\&= \frac{1}{\varepsilon^2E(S_N)}\end{aligned}$$
* 此处因为组成$S_N$的都是$1_{A_n}$这样的特征函数，由于独立性$V(S_N)=V(1_{A_1})+\cdots+V(1_{A_n})$,而$V(1_{A_n})\leq E(1_{A_n}^2)\leq E(1_{A_n})$因此上面的不等式才可以利用$$V(S_N)\leq E(S_N)$$
而一开始的条件告诉我们$E(S_N)\to \infty$，因此就有$$P\left(\left\{\omega:\left|S_N(\omega)-E(S_N)\right|\geq \varepsilon E(S_N) \right\}\right)\to 0$$于是我们验证了$f_N(\omega)$依照测度收敛到$1$。

### 2. 加强收敛性为几乎处处收敛

#### 2.1 使用子列来提升收敛性

> [!想法]
> 为了使用Borel-Cantelli引理来加强收敛性，我们需要对$P\left(\left\{\omega:\left|S_N(\omega)-E(S_N)\right|\geq \varepsilon E(S_N) \right\}\right)$做估计，使得这个实数列形成的级数是收敛的。
> 
> 但是我们第一节使用Chebyshev的估计的结果完全不足以好到可以断言级数收敛的地步。不过我们想到了使用[[用子列来提升收敛性质]]这个想法，如果我们可以证明对于某个特殊的子列，几乎处处收敛是成功的，然后我们再把这种性质过渡到原来的序列上，那么证明就能成功。

我们可以构造这样一个子列$$N_k:=\inf\{N:E(S_N)\geq k^2\}$$以此来利用$\sum_k \frac{1}{k^2}$的收敛性来保证子列有$$\sum_{k\geq 1}P\left(\left\{\omega:\left|S_{N_k}(\omega)-E(S_{N_k})\right|\geq \varepsilon E(S_{N_k}) \right\}\right)\leq \frac{1}{\varepsilon^2}\sum_{k\geq 1}\frac{1}{ k^2}<\infty$$那么子列就有$$f_{N_k}(\omega):=\frac{S_{N_k}(\omega)}{E(S_{N_k})}\xrightarrow{a.e.}1$$
#### 2.2 为什么该子列的收敛性可以过渡到序列本身的收敛性?

我们直接证明一个一般的情形：

> [!命题2：子列几乎处处收敛可以过渡到序列本身收敛的命题]
> $X_n$是一个非负递增的随机变量序列，$c_n$是一个非负递增的实数列。如果我们可以找到一个$c_n$的子列$c_{n_k}$使得$\frac{X_{n_k}}{c_{n_k}}\xrightarrow{a.e.}1$,并且子列满足$\frac{c_{n_{k+1}}}{c_{n_k}}\to 1$那么我们可以得到$$\frac{X_{n}}{c_{n}}\xrightarrow{a.e.}1$$

首先$n_k\leq n<n_{k+1}$,$$\frac{X_{n_{k}}(\omega)}{c_{n_{k+1}}} \leq \frac{X_n(\omega)}{c_n}\leq \frac{X_{n_{k+1}}(\omega)}{c_{n_k}}$$然后我们可以得到$$\frac{c_{n_k}}{c_{n_{k+1}}}\frac{X_{n_{k}}(\omega)}{c_{n_{k}}} \leq \frac{X_n(\omega)}{c_n}\leq \frac{X_{n_{k+1}}(\omega)}{c_{n_{k+1}}}\frac{c_{n_{k+1}}}{c_{n_k}}$$那么我们可以得到上极限和下极限的不等式$$\limsup_{n\to \infty} \frac{X_n(\omega)}{c_n}\leq \limsup_{n\to \infty}\frac{X_{n_{k+1}}(\omega)}{c_{n_{k+1}}}$$同时$$\liminf_{n\to \infty} \frac{X_n(\omega)}{c_n}\geq \liminf_{n\to \infty}\frac{X_{n_{k}}(\omega)}{c_{n_{k}}}$$而因为序列$\frac{X_n}{c_n}$几乎处处收敛到1，那么我们也可以得到结果说$$\limsup_{n\to \infty} \frac{X_n(\omega)}{c_n}=\liminf_{n\to \infty} \frac{X_n(\omega)}{c_n}=1$$是几乎处处成立的。

#### 2.3 完成证明

根据2.2，我们只需要证明当$N_k:=\inf\{N:E(S_N)\geq k^2\}$的时候$$\frac{E(S_{N_{k+1}})}{E(S_{N_k})}\to 1$$只要这个极限是成立的，那么由2.1的子列的几乎处处收敛我们就可以完成命题1的证明，得到原来序列的几乎处处收敛。

上述的极限是成立的，因为从$N_k$的定义，以及$E(1_{A_n})\leq 1$所以序列有上下界的估计：$k^2+1\geq E(S_{N_k})\geq k^2$于是
$$k^2\leq E(S_{N_k})\leq E(S_{N_{k+1}})\leq (k+1)^2+1$$