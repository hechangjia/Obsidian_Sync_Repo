---
tags:
  - math
  - 代数基础
---

> [!Fermat's little theorem]
> $a$是一个正整数，$p$为一个素数$(a,p)=1$,要证明:
> $$a^{p-1}=1\text{ mod }p$$


### 1.从代数的角度来考虑会更简洁
考虑模$p$的剩余类的集合$\mathbb{Z}/p\mathbb{Z} =\{\mathbf{0},\mathbf{1},\mathbf{2},...,\mathbf{p-1}\}$其中元素$\mathbf{k}$表示全体模p余k的整数，如果我们能证明此集合当中**非零元素**关于乘法能构成一个群结构 $(\mathbb{Z}/p\mathbb{Z})^{\times}$，那么只要我们能证明这个群是p-1阶的群，那么必定成立费马小定理。

(剩余类的乘法$\mathbf{a}*\mathbf{b}=\mathbf{c}$表示$\mathbf{c}=\{a'b':a'\in\mathbf{a},b'\in\mathbf{b}\}$然后这个集合一定是一个剩余类，这是模运算的定义导致的)

即假设$a$所属的同余类为$\mathbf{a}$，
$$\mathbf{a}
\in(\mathbb{Z}/p\mathbb{Z})^{\times},\mathbf{a}^{p-1}=\mathbf{1}$$
这是因为群当中任意元素的阶必须是群的阶的因子。按照群元素阶的定义，假设$h$是群元素$\mathbf{k}$的阶，那么
$$\mathbf{a}^{h} = \mathbf{1},p-1 = hm\implies
\mathbf{a}^{p-1}=\mathbf{a}^{hm} = \mathbf{1}^m=\mathbf{1}$$
这是由于群的拉格朗日定理导致的。

为何只考虑非零元素？因为费马小定理当中提到了$(a,p)=1$,所以$a^{p-1}\neq 0 \text{ mod }p$，如果单纯考虑乘法的关系就只需要考虑非零元。并且加上零元素以后，乘法不能让集合构成群结构。

接下来证明此集合在乘法运算下构成群结构:
1.  封闭性：显然。
2.  单位元:$\mathbf{1}$
3.  逆元: 只需要确保同余方程$kx =1\text{ mod }p$必定存在一个解即可。注意到如果$k$是$(\mathbb{Z}/p\mathbb{Z})^{\times}$某个剩余类当中的代表元，那么$(k,p)=1$，那么由欧氏算法，我们一定可以找到一对整数$x,y$满足$kx+py=1$。那么于是$x$所属的模p剩余类就是剩余类$\mathbf{k}$的逆元。也就是说模p的剩余类当中每一个元素都是群当中的元素。如果我们考虑一般的情况$(\mathbb{Z}/n\mathbb{Z})^{\times}=\{\mathbf{1},\mathbf{2},...,\mathbf{n-1}\}$的话就未必了。因为这些剩余类当中并非每一个都存在乘法的逆元，想要存在乘法的逆元，必须要保证$(k,n)=1$才行。
4.  结合律:显然。而且甚至有交换律的满足。

于是$(\mathbb{Z}/p\mathbb{Z})^{\times}$是一个交换群。那么为什么此群的阶是$p-1$阶的呢？由于剩余类的定义，这是比较显然的。

此外假设$|(\mathbb{Z}/n\mathbb{Z})^{\times}| =\varphi(n)$，我们还可以知道这些群必须都是偶数阶的群。因为$(n-1,n) =1$所以$\mathbf{n-1} \in(\mathbb{Z}/n\mathbb{Z})^{\times}$,这是群的一个二阶元，因为$(n-1)^2= n^2 -2n+1 = 1 \text{ mod }n$,因此$2|\varphi(n)$。

### 2. 构造性的一个证明
这个方法最主要的办法是证明
$$S = \{\mathbf{a},\mathbf{2a},...,\mathbf{(p-1)a}\} =
\{\mathbf{1},\mathbf{2},...,\mathbf{p-1}\}$$
考虑整数$a$对应的剩余类$\mathbf{a}\in\mathbb{Z}/p\mathbb{Z},\mathbf{a}\neq\mathbf{0}$现在用这个元素依次乘这个群当中的所有非零元素，形成一个集合$S=\{\mathbf{a},\mathbf{2a},...,\mathbf{(p-1)a}\}$。这个集合当中的元素都是不同的，因为如果
$$\mathbf{at_1}=\mathbf{at_2}\implies
\mathbf{a}^{-1}\mathbf{at_1}=\mathbf{a}^{-1}\mathbf{at_2}\implies
\mathbf{t}_1=\mathbf{t}_2$$
于是
$$S = \{\mathbf{a},\mathbf{2a},...,\mathbf{(p-1)a}\} =
\{\mathbf{1},\mathbf{2},...,\mathbf{p-1}\}$$这很有趣，因为如果我们把S当中全部元素乘起来，这等于把群当中所有元素都乘起来。于是如果假设$\prod_{\mathbf{i}\in\mathbb{Z}/p\mathbb{Z}} \mathbf{i} = \mathbf{r}$那么$$\mathbf{a}^{p-1}\mathbf{r}=\mathbf{r} \implies
\mathbf{a}^{p-1}=\mathbf{1}$$这种消去律在群当中是显然成立的，因为群当中每个元素都有逆元。

然后我们把这个结果翻译回整数同余关系，那么$$a^{p-1}=1\text{ mod
}p$$
下面插入一个问题，如果我们关心$\mathbf{r}$是什么呢？即，$(\mathbb{Z}/p\mathbb{Z})^{\times}$当中全体元素乘起来是多少?

答案是$\mathbf{-1}$,这是Wilson给出的结果。

> [!Wilson 定理]
> p是素数，那么:
> $$(p-1)!=-1\text{ mod }p$$

#### 2.1 模p的剩余类$\mathbb{Z}/p\mathbb{Z}$关于加法和乘法构成一个域

虽然Wilson定理是一个关于把$(\mathbb{Z}/p\mathbb{Z})^{\times}$这个Abel群的所有元素乘起来的结果，但是这不妨碍我们在更大的结构当中考虑这个问题。

剩余类除了可以做乘法还可以做加法，这样的话集合$\mathbb{Z}/p\mathbb{Z}$当中便定义了两种运算，我们可以确认看看这究竟是否是一个域？

1.  加法运算形成Abel群: 显然。
2.  乘法运算形成半群:

也比较显然，并且乘法具有交换性。不过注意这个半群并不是$(\mathbb{Z}/p\mathbb{Z})^{\times}$，这个群是不包含加法单位元$\mathbf{0}$的，在跟一般的情况下，$(\mathbb{Z}/n\mathbb{Z})^{\times}$只包含了$\varphi(n)$个环当中的元素，也就是全体代表元与n互素的
那些剩余类。(对于合数而言，$\varphi(n)\leq n-\sqrt{n}$)

3.  加法对乘法的分配律:对于同余运算而言也比较显然。
4.  整环：这是因为$$kt = 0 \text{
    mod } p \implies p|k \text{ or
    }p|t$$这意味着，如果$\mathbf{k}\mathbf{t}=\mathbf{0}$要么$\mathbf{k}=\mathbf{0}$要么$\mathbf{t}=\mathbf{0}$，于是这是整环。
5.  每个非0元素都有乘法逆元：因为按照之前的分析$(\mathbb{Z}/p\mathbb{Z})^{\times}$是环的所有非零形成的群，这些元素都有逆元。这一点是特殊的，只有$n=p$的时候才能做到。对于一般的$\mathbb{Z}/n\mathbb{Z}$这一点不成立，所以只能有上面四个，也就是一个整环。

为何要利用域这个结构? 因为我们想要证明，$(\mathbb{Z}/p\mathbb{Z})^{\times}$当中有唯一一个二阶元数$\mathbf{p-1}$.这一点用域的结构来证明很显然。

威尔逊定理
$$(p-1)!=-1\text{ mod }p$$
用$\mathbb{Z}/p\mathbb{Z}$是一个域来理解这件事就比较简单，翻译过来就是:$$(\mathbf{p-1})!=-\mathbf{1}$$如何理解$-\mathbf{1}$？实际上就是单位元$\mathbf{1}$在加法上的逆元，实际上$-\mathbf{1}= \mathbf{p-1}$.

1.  $\mathbf{p-1}$这个元素很有意思，因为$(\mathbf{p-1})^2 =(-\mathbf{1})^2=\mathbf{1}$,也就是说这是一个二阶元，其逆就是它本身。这种逆元是自己的元素，在此域当中只有两个:$-\mathbf{1},\mathbf{1}$.因为我们在此域上解方程(在一般的整环上，唯一分解是不一定成立的，因此此方程不能这样解)$$\mathbf{x}^2=1
    \implies \mathbf{x} = \mathbf{1} \text{ or }\mathbf{x} =
    -\mathbf{1}$$除此以外非负的元素，都存在一个不是自己的唯一的(乘法)逆元，也就是说除了上面两个元素，其他任意的非零元素$\mathbf{t}$一定存在一个$$\mathbf{r},\mathbf{r}\neq
    \mathbf{t},\text{ s.t }\mathbf{t}\mathbf{r}=\mathbf{1}$$
2.  所以按照上面的分析，$\{\mathbf{1},\mathbf{2},...,\mathbf{p-1}\}$元素全部乘起来结果是多少?$$(\mathbf{p-1})!
    =
    (\mathbf{1}*(\mathbf{p-1}))\prod(\mathbf{tr})=(\mathbf{1}*(\mathbf{p-1}))=-\mathbf{1}$$
进一步的推广，参见[[推广Wilson定理]]。

### 3.推广为欧拉定理

> [!欧拉定理]
> 正整数$a,n$满足$(a,n)=1$那么
> $$a^{\varphi(n)}=1\text{ mod }n$$

1.  如果按照第一种思路，我们只需要证明$(\mathbb{Z}/n\mathbb{Z})^{\times}$这是一个$\varphi(n)$阶群。换言之，模n的剩余类$\mathbb{Z}/n\mathbb{Z}$的集合当中，有逆元存在的那些剩余类组成的一个群是$\varphi(n)$的。所以这个证明当中核心的部分就是说同余方程$ax= 1 \text{ mod }n$有解等价于$(a,n)=1$。然后关键就只有拉格朗日定理了，即$\mathbf{a}\in (\mathbb{Z}/n\mathbb{Z})^{\times}$的话，$\mathbf{a}^{\varphi(n)}=\mathbf{1}$.（理由和n =p的情况一致）
2.  如果是第二种证明的话,我们只需要重复上面的论证假设$G=(\mathbb{Z}/n\mathbb{Z})^{\times}$那么$$S = \{\mathbf{a}g:g\in G\} =\{g:g\in
    G\}$$然后$$\prod_{g\in G}\mathbf{a}g =
    \mathbf{a}^{\varphi(n)}\prod_{g\in G}g =\prod_{g\in G}g$$所以一定有$$\mathbf{a}^{\varphi(n)}=\mathbf{1}$$


