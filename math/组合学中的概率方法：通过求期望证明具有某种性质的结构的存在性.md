---
tags:
  - math
  - tool_idea
---

通过概率的方式去证明组合当中结构的存在性，其基本的想法来自于这样一个关于随机变量的期望(也就是可测函数的积分)的事实

> [!关于期望(积分)的事实]
> $X:\Omega \to \mathbb{R}$是随机变量，
> 1. 如果$$E(X)> a$$那么一定$\exists \omega_0 \in \Omega,\text{ s.t. } X(\omega_0) >  a$
> 2. 如果$$E(X)= a$$那么一定$\exists \omega_0,\omega_1 \in \Omega,\text{ s.t. } X(\omega_0) \geq  a$ 且$X(\omega_1) \leq  a$
> 3. 如果$$E(X)\geq a$$那么一定$\exists \omega_0 \in \Omega,\text{ s.t. } X(\omega_0) \geq   a$

 1. 如若不然，对任意的$\omega \in \Omega,X(\omega)\leq a$，那么由[[函数积分的单调性]]可以知道$E(X)\leq a$,这与条件矛盾。
 2. 如若不然，那么命题的否定形式成立。于是对任意的$\omega_0,\omega_1 \in \Omega,X(\omega_0)< a$或者$\omega \in \Omega,X(\omega_1)> a$.
那么我们要证明的是，任意一种情况都是与条件$E(X)=a$矛盾的。假设第一种情况成立，那么因为不等式在一个正测度的集合(整个$\Omega$测度为1)上严格成立，那么$E(X)>a$，这与条件矛盾。另一种情况也会类似的得到$E(X)<a$的矛盾结果，于是原来的命题成立。

注意命题当中的大于等于当中的等于是必要的，因为假设$X \equiv a$那么实际上存在的是$\omega_0$使得$X(\omega)=a$，如果不是大于等于而是严格大于，那么这个命题是错的。

 3. 如若不然，$X < a$,那么由于这个不等式严格在一个正测度的集合上成立，于是$E(X)< a$，这与假设矛盾。

总结一下就是，

> [!通过期望证明存在性的原则]
> 1. 我们需要证明某个满足某种数量关系的结构是存在的。
> 2. 把这种数量关系定义为一个随机变量.(把这种数量关系给随机化)
> 3. 求这个随机变量的期望，得到这个期望满足的等式，或者不等式。然后根据期望的结果，断定某种结构的存在性。

---

**注意，在使用这个方法的时候一定要搞清楚，哪些是问题当中已经被固定不能改变的对象，哪些是可以被随机化的对象。**


### 1. 典型的例子
#### 1.1 例子1：

> [!例子1]
> $v_1,...,v_m$是$\mathbb{R}^n$当中的m个单位向量，证明存在这样一组整数$r_1,...,r_m \in \{-1,1\}$使得:$$||r_1v_1+...+r_mv_m||_2 \geq \sqrt{m}$$

1.  **问题要证明的存在的结构**:$Y = r_1v_1+...+r_mv_m$
2.  **这个结构需要满足的性质**:$||r_1v_1+...+r_mv_m|| \geq \sqrt{m}$
3.  **如何把这个结构所包含的性质转换为一个随机变量?**
    首先把结构给随机化，把$r_i$替换为参数为1/2的Bernoulli随机变量$\xi_i$的取值,即考虑$\xi_i:\Omega \to \{-1,1\}$，$\xi_i(\omega) = r_i$，这是m个独立同分布的随机变量。然后定义$$X(\omega) =
    ||\xi_1(\omega)v_1+...+\xi_m(\omega)v_m||^2$$为一个新的随机变量,那么现在只需要证明:$$E(X)
    \geq m$$
4.  **算期望**，并意识到线性性的存在:$$\begin{aligned}X
    &= \left\langle \sum_{i = 1}^{m} \xi_iv_i,\sum_{i = 1}^{m}
    \xi_iv_i\right\rangle \\ &= \sum_{1\leq i,j\leq m}
    \xi_i\xi_j \langle v_i,v_j \rangle
    \end{aligned}$$然后我们意识到，在求期望的过程中$E(\xi_i) = 0,E(\xi_i^2)=1$，于是我们意识到区分$E(\xi_i\xi_j),i\neq j$以及$E(\xi_i^2)$的必要性，于是$$X =
    \sum_{i=1}^{m}\xi_i^2||v_i||^2 + \sum_{i\neq
    j}\xi_i\xi_j \langle v_i,v_j \rangle$$于是$$E(X) =
    \sum_{i=1}^{m} E(\xi_i^2) = m$$
5.  **结论**：一定存在$\omega_0 \in \{0,1\}$使得$$Y = \xi_1(\omega_0)v_1+...+\xi_m(\omega_0)v_m
    = r_1v_1+...+r_mv_m$$使得值$X(\omega_0) \geq m$成立。

（如果该问题当中的范数不是2范数而是p范数，那么期望应该如何计算，或者如何估计？参考[Khintchine inequality](https://en.wikipedia.org/wiki/Khintchine_inequality)）

#### 1.2 例子2：(Erdos 1965)关于满足某个性质的sum-free subsets的存在性问题


> [!例子2]
> 证明任意的不包含0的n个整数的集合$S$必然存在一个元素个数大于n/3的sum-free(任意两个元素都不满足加法封闭性)子集。

1.  **想法1**：是把$S =\{s_1,...,s_n\}$这个集合的sum-free的性质转换为$rS/p\mathbb{Z}$的sum-free的性质,而这里的r就是用来制造一定的随机性的工具。如果$$rS/p\mathbb{Z}=\{r\overline{s_1}
    ,...,r\overline{s_n} \}$$当中有某个sum-free的子集$rA/p\mathbb{Z}$，对应的就可以找到$S$当中的sum-free的子集$A$.

它等价于说，如果$A \subseteq S$不是sum-free的，那么必然$rA/p\mathbb{Z}$不是sum-free的。因为如果$s_a+s_b \in A$,那么必定存在$s_c \in A$，$s_a+s_b = s_c$使得$rs_a+rs_b = rs_c \in rA$,从而导致 $rA/p \mathbb{Z}$ 这不是一个sum-free的子集。

不过，**这里要注意，此处的$p$要足够大，使得集合$S$当中没有任何两个元素模$p$以后属于同一个剩余类，以及$S$当中不可能存在被$p$整除的元素**。

2.  **想法2**:如果有一个集合是sum-free的，那么它的子集肯定也是sum-free的。

接下来直接构造一个这样的集合，挑一个 形如$3k+2$的素数$p$,然后$T_2\subset \mathbb{Z}/p\mathbb{Z}$，这里是因为我们想要把此素数对应的剩余内分成三段，使得中间那一段无论互相之间怎么相加，结果都落在第一段和最后一段，从而使得这个集合是sum-free的.也就是说,$\mathbb{Z}/p\mathbb{Z} = T_1\cup T_2\cup T_3$
$$T_2 =\{\mathbf{k+1},\mathbf{k+2},...,\mathbf{2k+1}\}$$然后$T_2$是$\mathbb{Z}/p\mathbb{Z}$当中一个包含了k+1个元素的sum-free的子集。然后$$rS/p\mathbb{Z} \cap T_2$$这是一个sum-free的子集。

3.   **问题要证明的存在的结构**:

证明存在$rS/p\mathbb{Z} \cap T_2$是一个sum-free集合。

4.  **这个结构需要满足的性质**:$|rS/p\mathbb{Z} \cap T_2|>n/3$
5.  **如何把这个结构所包含的性质转换为一个随机变量?** 
$$\xi:\mathbb{Z}/p\mathbb{Z}\to \mathbb{Z}\subset\mathbb{R}$$具体实际上就是把$\mathbf{i}\mapsto i$,即挑剩余类当中最小的非负的那个元素。样本空间为$\Omega = \mathbb{Z}/p\mathbb{Z}$,sigma代数实际上就是幂集，然后概率测度就是$P(\{\mathbf{i}\})=\frac{1}{p}$。然后定义一个新的随机变量:$$Y(\omega):=|\xi(\omega)S/p\mathbb{Z} \cap T_2|$$这同样是一个随机变量，$Y:\mathbb{Z}/p\mathbb{Z}\to \mathbb{Z}^{*}\subset \mathbb{R}$

 **算期望**:

计算$Y$的随机变量的时候，我们可以考虑一个经典的概率论的技巧。随机变量期望的可加性(线性性)实际上是不需要考虑独立性，因此参考数学当中一个经典的想法"分而治之"，通过分解原来的随机变量，使得每一个部分的期望变得好算，从而解决整体的期望。这里可以把$Y$表达为，$$Y  = \sum_{i=1}^{n} |\{\xi \overline{s_i} \}\cap
T_2|$$那么期望可以表示为$$\begin{aligned}E(Y) &=
\sum_{i=1}^{n} E[|\{\xi \overline{s_i} \}\cap T_2|]
 \\ &= \sum_{i=1}^{n} E[|\{\omega: \overline{\xi}(\omega) =(\overline{s_i})^{-1}a,a\in
  T_2\}|] \\&= \sum_{i=1}^{n}
 \frac{k+1}{3k+2}>\frac{n}{3}\end{aligned}$$
**结论**:
一定存在一个$\omega_0 \in \mathbb{Z}/p\mathbb{Z}$,使得$Y(\omega_0)>\frac{n}{3}$，从而对应相应的$rS/p\mathbb{Z}$的具有这样的性质的sum-free集合，那么同样的也就存在一个满足这样的性质的sum-free的S的子集。



#### 1.3 例子3: (BAMO 2004,4)

> [!例子3]
> 考虑n个不全为0并且和为0的实数$a_1,...,a_n$,证明存在一种重排列$\sigma_0$使得$$a_{\sigma_0(1)}a_{\sigma_0(2)}+...a_{\sigma_0(n)}a_{\sigma_0(1)}<0$$


1.  **问题要证明的存在的结构**:$\sigma_0$
2.  **这个结构需要满足的性质**:$a_{\sigma_0(1)}a_{\sigma_0(2)}+...a_{\sigma_0(n)}a_{\sigma_0(1)}<0$
3.  **如何把这个结构所包含的性质转换为一个随机变量?**  $$Y(\sigma):=a_{\sigma(1)}a_{\sigma(2)}+...a_{\sigma(n)}a_{\sigma(1)}$$这是一个$S_n\to \mathbb{R}$的随机变量，此概率空间的概率测度是离散的概率测度$P(\{\sigma\})=\frac{1}{n!}$。我们还可以把此随机变量做一个自然的分解,比如其中的$$X_1(\sigma)= a_{\sigma(1)}a_{\sigma(2)}$$
4.  **算期望**:$E(Y) =E(X_1)+...+E(X_n)$其中比如$$\begin{aligned}E(X_1)&=\sum_{i\not
    =j} a_ia_jP(\{\sigma\in S_n:a_{\sigma(1)}a_{\sigma(2)} =
    a_ia_j\}) \\ &= \sum_{i\not =j} \frac{a_ia_j}{n(n-1)}
    =\frac{1}{n(n-1)}\sum_{i\not =j} a_ia_j \\&=
    \frac{1}{n(n-1)}\sum_{i=1}^{n}a_i\sum_{j\neq i} a_j \\
    &=\frac{1}{n(n-1)}\sum_{i=1}^{n}-a_i^2 <0
    \end{aligned}$$ 因此$E(Y) <0$.
5. **结论**：因此必然存在一个$\sigma_0 \in S_n$使得$Y(\sigma_0)<0$.


### 2. 其他的一些例子

* 有限[[鸽笼原理]]当中有一个版本的证明可以通过概率的方式，证明存在某个$y_0 \in B$ 使得其映射的原像$|f^{-1}(y_0)| > \lfloor n/m\rfloor$.这是典型的通过构造随机变量，通过期望的等式或者不等式，得到确定某个结构的存在性的用法。














