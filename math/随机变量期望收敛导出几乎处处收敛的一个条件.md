---
tags:
  - math
  - 概率论
  - 实分析
---
> [!命题1]
> $X_n$是概率空间上的一列随机变量，假设$E(X_n)\to C$，并且这一列随机变量的方差收敛$\sum_{n\geq 1}V(X_n)< \infty$，那么$$X_n\xrightarrow{a.s.} C$$

参照[[加强收敛性质的条件与手段]]当中的经验，当我们得到了随机变量的积分的收敛性以后，我们想要把这种收敛加强到几乎处处收敛，并且我们获得了一个与其范数有关的条件，那么我们可以考虑使用Borel-Cantelli引理来加强这种收敛。
### 1. 第一次尝试

根据[[Borel-Cantelli lemma及其应用]]当中的经验，对任意$\varepsilon>0$，我们假设$$A_{n,\varepsilon}:=\{\omega:|X_n(\omega)-C|\geq\varepsilon\}$$那么只要我们能证明对于概率测度$P$,有$$\sum_{n\geq 1}P(A_{n,\varepsilon})<\infty$$那么整个问题也就解决了。

对于上述级数的收敛判定，我们的想法也非常简单，无非就是采用[[逐项估计]]，对每一个$P(A_{n,\varepsilon})$做估计，最后试图把误差控制在$O(1)$的级别上。我们当然可以直接考虑对此集合的测度的一个上界控制，结合随机变量的方差的条件，我们可以尝试Chebyshev不等式$$\begin{aligned}P(A_{n,\varepsilon})&\leq \frac{E(|X_n-C|^2)}{\varepsilon^2}\\&=\frac{V(X_n)}{\varepsilon^2}+\frac{(EX_n-C)^2}{\varepsilon^2}\end{aligned}$$但是现在出问题了，$\sum_n \frac{V(X_n)}{\varepsilon^2}$倒是好说，可是后面的$\sum_{n\geq 1}\frac{(EX_n-C)^2}{\varepsilon^2}$可不一定是收敛的！比如下面这个反例:

> [!反例1]
> 考虑随机变量$X_n \sim \mathcal{N}(\frac{1}{\sqrt{n}},\frac{1}{n^2})$,那么显然均值是收敛到$C=0$的，并且方差的和是收敛的，不过此时$E(X_n)^2 = \frac{1}{n}$，这个和可并不收敛。

这说明在上面的放缩过程中，$P(A_{n,\varepsilon})$的上界产生的误差太大了，超出了我们的精度允许范围。那么有没有什么改进的方法呢？

### 2. 尝试用分布函数的简单分段估计改进精度

> [!提高放缩精度的想法]
> 我们可以参考[[Lebesgue微分定理]]当中的想法，先找一个合适的中间对象，然后使用[[分段估计的想法]]中1.2节提到的“分布函数的简单分段估计”来提高放缩精度。而我们之所以用$E(X_n)$作为中间对象，是因为条件中$\sum_{n\geq 1}V(X_n)< \infty$是关于$V(X_n)$有关的信息，而这个在对于分布函数的控制中通常是控制$X_n-E(X_n)$的分布函数的上界的。



我们定义$$\lambda_f(a):=P(\{\omega:|f(\omega)| \geq a\})$$那么实际上$P(A_{n,\varepsilon})=\lambda_{X_n-C}(\varepsilon)$，而根据这种函数的三角不等式,因为$$|X_n-C|\leq |X_n-E(X_n)|+|E(X_n)-C|$$因此$$\lambda_{X_n-C}(\varepsilon)\leq \lambda_{X_n-E(X_n)}(\varepsilon/2)+\lambda_{E(X_n)-C}(\varepsilon/2)$$于是
1. $\lambda_{X_n-E(X_n)}(\varepsilon/2)$根据Chebyshev不等式有$$\lambda_{X_n-E(X_n)}(\varepsilon/2)\leq \frac{4V(X_n)}{\varepsilon^2}$$
2. 因为$E(X_n)-C$实际上是一个收敛到0的实数列，这就意味着对于任意的$\varepsilon/2$,一定存在$N_{\varepsilon}$使得$n>N_{\varepsilon}$的时候因为$|E(X_n)-C|<\frac{\varepsilon}{2}$因此$P(\{\omega:E(X_n)-C|\geq \frac{\varepsilon}{2}\})=0$,也就是说从某一项开始$\lambda_{X_n-E(X_n)}(\varepsilon/2)=0$，如此一来这也不影响收敛。因此$$\sum_{n\geq 1}\lambda_{E(X_n)-C}(\varepsilon/2)=\sum_{n\leq N_{\varepsilon}}\lambda_{E(X_n)-C}(\varepsilon/2)<\infty$$
综上所述$$\sum_{n\geq 1}P(A_{n,\varepsilon})\leq \frac{4}{\varepsilon^2}\sum_{n\geq 1} V(X_n)+\sum_{n\leq N_{\varepsilon}}\lambda_{E(X_n)-C}(\varepsilon/2)<\infty$$对任意$\varepsilon>0$成立，那么由于[[Borel-Cantelli lemma及其应用]]当中“常用引理1”，那么$$X_n\xrightarrow{a.s.}C$$
#### 2.1 补充

其实我们还可以使用这样的想法：

> [!间接证明几乎处处收敛的想法]
> 假设我们需要证明$f_n \xrightarrow{a.e.} f$,如果我们已经知道$g_n \xrightarrow{a.e.} f$,以及$|f_n-g_n| \xrightarrow{a.e.} 0$,那么我们就能立刻得到结果。换言之，如果我们知道别的对象也几乎处处收敛到目标函数$f$，比如这里的$g_n$，那么我们可以转而去想办法先证明$|f_n-g_n|$几乎处处收敛到0.

要证明几乎处处收敛，按照上文所说，无非就是证明函数的值的分布函数对任意的$\varepsilon>0$都有$\sum_{n\geq 1}\lambda_{|f_n-f|}(\varepsilon)<\infty$。而另外两个几乎处处收敛相当于告诉我们，$\sum_{n\geq 1}\lambda_{|f_n-g_n|}(\varepsilon/2)<\infty,\sum_{n\geq 1}\lambda_{|g_n-f|}(\varepsilon/2)<\infty$那么由于“分布函数”的三角不等式$$\lambda_{|f_n-f|}(\varepsilon)\leq \lambda_{|f_n-g_n|}(\varepsilon/2)+\lambda_{|g_n-f|}(\varepsilon/2)$$因此$$\sum_{n\geq 1}\lambda_{|f_n-f|}(\varepsilon)\leq \sum_{n\geq 1}\lambda_{|f_n-g_n|}(\varepsilon/2)+\sum_{n\geq 1}\lambda_{|g_n-f|}(\varepsilon/2)<\infty$$
所以上面的证明我们也可以直接使用这样的想法来进行证明，即我们只需要证明$$|X_n-E(X_n)|\xrightarrow{a.e.}0$$而这一点由方差的和的收敛性可以保证。