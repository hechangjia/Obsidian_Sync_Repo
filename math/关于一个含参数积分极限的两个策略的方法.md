---
tags:
  - math
  - 实分析
---

> [!问题]
> $f\in C(E\to \mathbb{R}),E = [0,1]\times[-1,1]$,求序列的极限:
> $$\lim_{n\to\infty}\int_{0}^{1}f(x,\sin(nx))dx=?$$
> 

### 1. 用多项式逼近连续函数

这里要证明由$S:=\{x^iy^j:(x,y)\in E \text{ and }i,j\in\mathbb{N}\}$经由$\mathbb{R}$上的数乘，以及互相之间的乘法，加法生成的代数$\mathcal{A}(S)$是$C(E\to\mathbb{R})$的稠密子代数。

这里需要验证两点：
1.  **$\mathcal{A}(S)$在$E$上不消失**。显然因为$1\in \mathcal{A}(S)$,$1\neq 0$它不消失。
2.  **$\mathcal{A}(S)$分离$E$上的点**。$h(x,y)=x+y\in\mathcal{A}(S)$,任意$(x_1,y_1),(x_2,y_2)\in E$,并且二者不相同。首先如果两个点不在同一个圆周上，那么必然他们分别到坐标原点的距离不等，那么定义$h_1(x,y)=x^2+y^2$,这样可以分离长度不同的点。如果他们在同一个圆周上，那么他们必定不会共线，于是当两个点不共线的时候，$h_2(x,y) = ax+by$,$$a =
    \frac{y_2}{x_1y_2-x_2y_1},b=-\frac{x_2}{x_1y_2-x_2y_1}
    $$因为不共线，所以$x_1y_2-x_2y_1\neq 0$,此时$h(x_1,y_1)=1,h(x_2,y_2)=0$。（实际上这里解了一个二元线性方程组）。

既然$\mathcal{A}(S)$是稠密子代数，那么假设对于任意的$\mathcal{A}(S)$当中的多项式，上述极限如何计算？

1.  首先计算生成元当中的情况，即$$\int_{0}^{1}x^i\sin^j(nx)dx\to?$$利用Riemann - Lebesgue lemma推广的结果，可以知道其结果等于$$\int_{0}^{1}x^i\left(\frac{1}{2\pi}\int_{0}^{2\pi}\sin^{j}(y)dy\right)dx
    =\frac{1}{2\pi}\int_{0}^{1}\int_{0}^{2\pi}x^i\sin^{j}(y)dydx$$由多项式的线性结构，可以得到对于任意$g\in \mathcal{A}(S)$都有：$$\int_{0}^{1}g(x,\sin(nx))dx\to\frac{1}{2\pi}\int_{0}^{1}\int_{0}^{2\pi}g(x,\sin(y))dydx$$
2.  是否可以推广到$C(E\to\mathbb{R})$当中?我们知道任意$\varepsilon>0,f \in C(E\to\mathbb{R})$都存在$g_{\varepsilon} \in\mathcal{A}(S)$使得，$||f-g_{\varepsilon}||_u<\varepsilon$，

于是假设$$A_{\varepsilon} = \frac{1}{2\pi}\int_{0}^{1}\int_{0}^{2\pi}g_{\varepsilon}(x,\sin(y))dydx,A= \frac{1}{2\pi}\int_{0}^{1}\int_{0}^{2\pi}f(x,\sin(y))dydx$$
以及假设$G_{\varepsilon}(n)=\int_{0}^{1}g_{\varepsilon}(x,\sin(nx))dx,F(n)=\int_{0}^{1}F(x,\sin(nx))dx$ 并且已知:
$$|F(n)-G_{\varepsilon}(n)|<||f-g_{\varepsilon}||_u<\varepsilon$$以及

$$\left|A_{\varepsilon} - A\right| <
\frac{1}{2\pi}\int_{E}\varepsilon
d(x,y)=\varepsilon$$于是我们无非要证明

$$\begin{aligned}|F(n)-A|&\leq
|F(n)-G_{\varepsilon}(n)|+|G_{\varepsilon}(n)-A_{\varepsilon}|+|A_{\varepsilon}-A|\\
&<2\varepsilon+|G_{\varepsilon}(n)-A_{\varepsilon}|\end{aligned}$$
两边取极限，于是得到
$$|\lim_{n\to\infty}F(n)-A|<2\varepsilon,\forall \varepsilon
>0$$所以$$\lim_{n\to\infty}F(n)=A$$

### 2： 渐近分析的角度

仿照对此积分的估计：
$$\int_{0}^{\pi}
\frac{\left|\sin\left((N+\frac{1}{2})t\right)\right|}{t}
dt$$这个问题当中的技巧，是一类问题的技巧，在Riemann - Lebesgue
lemma的推广当中有用到。就是说有一个有界的，周期函数，然后
$$\int_{a}^{b}g(nx)dx \to
\frac{b-a}{T}\int_{0}^{T}g(x)dx$$基本的处理技巧是:


> [!想法]
> 本质上就是把积分按照周期进行可数分段，然后对每一段逐项进行估计。参考[[分段估计的想法]]中2.1，以及其中的一些例子。

对于此问题，我们也可以遵照这样的步骤来进行积分渐近.

1.  $u =nx$换元$$\begin{aligned}\int_{0}^{1}f(x,\sin(nx))dx
    &=
    \int_{0}^{n}f\left(\frac{u}{n},\sin(u)\right)\frac{1}{n}du
    \ \end{aligned}$$
2.  拆分积分区间为一个个完整周期，然后估计不完整周期：首先我们需要估计$[0,n]$当中有多少个$2\pi$的完整周期？很容易得到一共有:$N(n)=\lfloor\frac{n}{2\pi}\rfloor$个完整周期.对于不完整的周期，即$\left|\int_{2N(n)\pi}^{n}f\left(\frac{u}{n},\sin(u)\right)\frac{1}{n}du\right|\leq\frac{2\pi M}{n}$于是$$\begin{aligned}\int_{0}^{n}f\left(\frac{u}{n},\sin(u)\right)\frac{1}{n}du&=\frac{1}{n}\sum_{k=0}^{N(n)-1}\int
    _{2k\pi}^{2k\pi+2\pi}f\left(\frac{u}{n},\sin(u)\right)du+O\left(\frac{1}{n}\right)\\
    &= \frac{1}{n}\sum_{k=0}^{N(n)-1}\int_{0}^{2\pi}
    f\left(\frac{2k\pi+s}{n},\sin(s)\right)ds+O\left(\frac{1}{n}\right)\\&=\int_{0}^{2\pi}\frac{1}{n}\sum_{k=0}^{N(n)-1}f\left(\frac{2k\pi+s}{n},\sin(s)\right)ds+O\left(\frac{1}{n}\right)\\&=\int_{0}^{2\pi}\frac{1}{n}\sum_{k=0}^{N(n)-1}f\left(\frac{2k\pi}{n},\sin(s)\right)ds+o\left(1\right)\end{aligned}$$关于倒数第二步，函数$f(x,y)$在$E$上连续，也就意味着关于$x,y$分别连续。具体来说，此处如果我们控制$y$保持不变，$f(x_1,y)-f(x_2,y)=o(1)$,因此倒数第二步我们得到$f\left(\frac{2k\pi+s}{n},\sin(s)\right)=f\left(\frac{2k\pi}{n},\sin(s)\right)+o\left(1\right)$,所以可以得到最后那一步。
3.  现在我们只需要估计和式：$$\frac{1}{n}\sum_{k=0}^{N(n)-1}f\left(\frac{2k\pi}{n},\sin(s)\right)$$这里我们考虑黎曼和，$$\frac{1}{n}\sum_{k=0}^{N(n)-1}f\left(\frac{2k\pi}{n},\sin(s)\right)=\frac{1}{2\pi}\frac{2\pi}{n}\sum_{k=0}^{N(n)-1}f\left(\frac{2k\pi}{n},\sin(s)\right)$$对于区间$[0,1]$进行划分，$x_k=\frac{2k\pi}{n},k=0,...,N(n)-1,1$。相当于前$N(n)-1$个区间都是等分的，区间长度为$\frac{2\pi}{n}$,最后一个区间长度为$0<1-\frac{2N(n)\pi}{n}\leq \frac{2\pi}{n}$,所有的取值都是取区间左端点。于是最后$$\frac{1}{2\pi}\frac{2\pi}{n}\sum_{k=0}^{N(n)-1}f\left(\frac{2k\pi}{n},\sin(s)\right)=\frac{1}{2\pi}\int_{0}^{1}f(t,\sin(s))dt
    +o(1)$$于是最后我们可以得到整体的估计:$$\int_{0}^{1}f(x,\sin(nx))dx=
    \int_{0}^{2\pi}\frac{1}{2\pi}\int_{0}^{1}f(t,\sin(s))dtds
    +o(1)$$