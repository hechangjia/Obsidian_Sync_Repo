---
tags:
  - math
  - tool_idea
---
### 1. 基本的想法
如果需要证明某个对象$\int X\geq 0$或者$\sum X \geq 0$，可以尝试做进一步"重整"，使得问题变得更简单。
1. 这里的简单即新的求和或者积分的非负性是比较容易判断的。当然最理想的情况下，新的积分$\int X'\geq 0$或者新的求和$\sum X' \geq 0$的被积分或者被求和对象$X'$直接就是非负的。
2. 重组的方法各种各样，其中一个比较关键的步骤是"展开然后交换":
   * 对积分做分拆把问把问题转换为求和
   * 对被求和做展开，然后交换求和次序
   * 把被求和的其中一部分，视为某个积分的结果，然后交换积分与求和。

以上几个操作大多可归类为[[和以及积分换序]]当中的方法，但“重整”未必一定是展开然后换序而已。


### 1. 对被求和对象做展开
$a_i \in (-1,1),i \in \{1,...,n\}$，那么证明:
$$\prod_{1\leq i,j\leq n} \frac{1+a_ia_j}{1-a_ia_j} \geq 1$$
这个不等式，取对数以后变成了证明:
$$\sum_{1\leq i,j\leq
n}\left(\log(1+a_ia_j)-\log(1-a_ia_j)\right) \geq
0$$
我们可以选择去做Taylor展开因为$|a_ia_j| < 1$，因此可以转换为:$$\sum_{k\geq 1} \frac{1+(-1)^{k-1}}{k}\sum_{1\leq i,j\leq n}(a_ia_j)^{k} =\sum_{k\geq 1} \frac{1+(-1)^{k-1}}{k}\left(\sum_{i=1}^{n}a^k_i\right)^2 \geq 0$$细分以后便发现，其中每一项都是非负的，于是求和之后必然也是非负的。
### 2. 对积分做分拆,转换为求和问题
 这个问题出现在[[Stirling渐近公式及不等式]]的问题当中。
 证明对于任意的正整数$n$,积分$$\int_{n}^{+\infty}B_{3}(\{t\})\frac{1}{t^3}
    >0$$其中$B_3(x)$是3阶的Bernoulli多项式。这个问题来自于Stirling逼近的不等式版本，即证明$$\left|\sum_{i
    = 1}^{n} \log(i)
    -(n\log(n)-n+\frac{1}{2}\log(n)+\log(\sqrt{2\pi}))\right|<\frac{1}{12n}$$上述的问题其中一个解决方法是把积分转换为求和，因为积分当中带有$\{x\}$，其本质上是求和$$\begin{aligned}\int_{n}^{+\infty}B_{3}(\{t\})\frac{1}{t^3}
    &= \sum_{k\geq n}\int_{k}^{k+1}\frac{B_3(t-k)}{t^3}dt \\
    &= \sum_{k\geq n} g(k)
    \end{aligned}$$在做了这样的细分和交换以后，新的求和，实际上会有$g(k)>0,\forall k$.其中,$$g(k) =
3+\frac{1}{4}\frac{1}{k(k+1)}+\frac{3}{2}(1+2k)(\log(k)-\log(k+1))
>0$$虽然最后的证明并非那么容易完成，但也不是特别困难。
### 3. 把被求和当中一部分做成积分，并交换求和与积分
1. **例子1**：$$\sum_{1\leq i,j\leq n}\frac{a_ia_j}{i+j-1} \geq 0$$其中$a_i$是实数。这个问题实际上就是要证明，n阶Hilbert矩阵式正定矩阵。其中的关键式是发现$$\frac{1}{i+j-1}=\int_{0}^{1} x^{i+j-2}\,dx $$如此一来便有，$$\begin{aligned}\sum_{1\leq i,j\leq n}\frac{a_ia_j}{i+j-1}  &= \sum_{1\leq i,j\leq n} \int_{0}^{1} a_ia_jx^{i+j-2}\,dx \\ &=  \int_{0}^{1} \sum_{1\leq i,j\leq n}a_ia_jx^{i+j-2}\,dx \\ &= \int_{0}^{1} \left(\sum_{1\leq i\leq  n}a_ix^{i-1}\right)^2 \,dx\geq 0\end{aligned}$$不等式成立的充要条件是每一个系数$a_i =0$。
2. **例子2**：$r_1,...,r_n$是非负实数，$x_1,...,x_n$是实数。那么和$$\sum_{1\leq i,j\leq n} \min(r_i,r_j)x_ix_j \geq 0$$这个问题的关键是利用$$\min(r_i,r_j) = \int_0^{\min(r_i,r_j)}1\,dt=\int_{0}^{\infty} \mathbf{1}_{t\leq r_i}(t)\mathbf{1}_{t\leq r_j}(t)\,dt$$如此一来原来的求和就可以转换为$$\int_{0}^{\infty} \sum_{1\leq i,j\leq n} x_ix_j \mathbf{1}_{t\leq r_i}(t)\mathbf{1}_{t\leq r_j}(t)\,dt$$把双重求和整理整理就得到$$\int_{0}^{\infty} \left(\sum_{1\leq i,j\leq n} x_i\mathbf{1}_{t\leq r_i}(t)\right)^2\,dt \geq 0$$当然这其中有一个很常见的小技巧，即注意到$\sum_{i,j}f(i)f(j) = (\sum_{i}f(i))^2$.
3. **例子3**：在[[和的绝对值平均上比差的绝对值更大]]当中有一个离散版本的求和不等式$$\sum_{1\leq i,j\leq n}|x_i+x_j|\geq \sum_{1\leq i,j\leq n}|x_i-x_j|$$其中$x_1,...,x_n$是任意的实数。这个问题可以利用，积分重整的方法去解决。如果可以注意到，$\int_{0}^{\infty} \frac{1-\cos(xt)}{t}\,dt = \frac{\pi}{2}|x|$,那么可以把求和问题转换为一个标准的，证明实数求和非负的问题,然后我们可以把其中的绝对值处理为积分，然后交换次序:$$\begin{aligned}\sum_{1\leq i,j\leq n}|x_i+x_j|-|x_i-x_j|\geq &= \sum_{1\leq i,j\leq n} \frac{2}{\pi}\int_{0}^{\infty} \frac{\cos((x_i-x_j)t)-\cos((x_i+x_j)t)}{t}\,dt   \\&= \sum_{1\leq i,j\leq n} \frac{2}{\pi}\int_{0}^{\infty} \frac{\cos((x_i-x_j)t)-\cos((x_i+x_j)t)}{t}\,dt \\ &= \sum_{1\leq i,j\leq n} \frac{2}{\pi}\int_{0}^{\infty} \frac{\sin(x_it)\sin(x_j t)}{t}\,dt \\ &= \frac{2}{\pi}\int_{0}^{\infty} \sum_{1\leq i,j\leq n}\frac{\sin(x_it)\sin(x_j t)}{t}\,dt \\ &=\frac{2}{\pi}\int_{0}^{\infty} \frac{1}{t}\left(\sum_{1\leq i\leq n}\sin(x_it)\,dt  \right)^2 \geq 0\end{aligned}$$
