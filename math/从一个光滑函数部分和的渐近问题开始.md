---
tags:
  - math
  - 微积分
---

> [!问题(某校考研数分题目)]
> 求极限$$\lim_{n \to +\infty}\left(\sum_{k=1}^{n} \frac{1}{\sqrt{n^2+k}}\right)^n$$

我们完全可以把这个问题问题理解为对部分和$$S_n=\sum_{k\leq n}\frac{1}{\sqrt{n^2+k}}$$的要求精确到$1/n$的系数的渐近展开，或者说要求渐近余项为$o(1/n)$的展开。

对一个部分和做渐近展开，我们自然会想到[[和的积分估计]]当中的方法，我们自然不会首先就尝试复杂的工具，我们通常会从简单的情况开始尝试，比如简单的积分估计（主要是因为被求和对象是单调的，满足简单积分估计的要求）。
### 1.简单的积分估计

根据[[和的积分估计]]当中1当中和的简单积分估计的公式，假设$f_n(k) = \frac{1}{\sqrt{n^2+k}}$，那么这种方法能提供的余项的精度为$$O\left(f_n(1)+f_n(n)\right)=O\left(\frac{1}{n}\right)$$看起来这似乎是有可能不行的，因为我们要求的精度是达到$o\left(\frac{1}{n}\right)$才可以。但是也未必，因为这只是一个误差上界的估计，因为我们并不能保证余项误差一定是$\Theta(1/n)$，也就是这个同阶的无穷小。

比如如果我们一定要尝试简单估计，再配合一些积分的放缩，我们可以不用简单积分估计的渐近公式。而是给$S_n$找一个简单的积分的上界和下界(利用被求和对象的单调性)。因为此处直接积分涉及到上界是$f(1)+\int_{1}^n \frac{1}{\sqrt{n^2+t}}\,dt$以及下界是积分$$\int_{1}^{n+1} \frac{1}{\sqrt{n^2+t}}\,dt=2\sqrt{n^2+n+1}-2\sqrt{n^2+1}$$因此$$\frac{1}{\sqrt{n^2+1}}+\int_1^{n}\frac{1}{\sqrt{n^2+t}}\,dt>S_n>\int_{1}^{n+1} \frac{1}{\sqrt{n^2+t}}\,dt$$
进行一番计算以后发现其实上界和下界的展开都可以表示为$$1-\frac{1}{4 n}+O\left(\frac{1}{n^2}\right)$$那么实际上如果尝试简单估计，是可以行得通的。

也就是说，如果我们直接用简单估计的误差上限的结果，然后发现误差上限直接就能满足我们的问题对精度的要求，那么这说明简单估计一定能成功。但是反过来，如果达不到要求，也未必一定不能成功。

有了上面的渐近结果以后，我们使用渐近结果很容易就能知道最后的极限为$$e^{-1/4}$$
### 2. 逐项放缩

首先我们展示一个失败的逐项放缩。
#### 2.1 一个失败的逐项放缩

考虑到$$\frac{1}{\sqrt{n^2+n}} \leq \frac{1}{\sqrt{n^2+k}} \leq \frac{1}{\sqrt{n^2+1}}$$然而这样的放缩不需要计算求和之后的下界的估计和上界的估计，我们就知道这样是不可能成功的。因为通过估计每一项放缩积累的误差为$$\frac{1}{\sqrt{n^2+1}}-\frac{1}{\sqrt{n^2+n}}=\Theta\left(\frac{1}{n^2}\right)$$那么求和以后整体积累起来的误差就是$\Theta\left(\frac{1}{n}\right)$这是一定无法满足求极限的要求的。

#### 2.2 对于可微函数而言，通过Taylor展开决定放缩的程度

> [!基本想法]
> 对被求和对象的某种变形(需要是足够光滑的)做Taylor展开，然后根据对误差的需求，我们就可以根据这个要求相应地进行Taylor展开，作为放缩的上下界。

比如这个问题我们要求逐项放缩当中每项的误差都是$o(1/n^2)$的级别，那么我们就可以根据这个要求相应地进行Taylor展开。$$\begin{aligned}f_n(k)&=\frac{1}{n}\left(1+\frac{k}{n^2}\right)^{-\frac{1}{2}}\\&= \frac{1}{n}\left(1-\frac{k}{2n^2}+O\left(\frac{k^2}{n^4}\right)\right)\end{aligned}$$因为这样的话每一项的误差是$O(k^2/n^5)$级别的，即便是在求和以后累积起来也不过是$O(1/n^2)$级别，这是符合我们要求的。于是$$\begin{aligned}S_n &= \sum_{k\leq n}\frac{1}{n}\left(1-\frac{k}{2n^2}+O\left(\frac{k^2}{n^4}\right)\right)\\&=1-\frac{1}{4n}+O\left(\frac{1}{n^2}\right)\end{aligned}$$于是和上面一样的结果，我们可以得到最终的极限为$e^{-1/4}$.

我们现在看到以上的方法的优势就在于，对于这种光滑的函数，我们总是可以根据要求进行Taylor展开，从而实现逐项放缩。

#### 2.3 逐项放缩结合黎曼和与积分的误差的想法

参照[[一个竞赛中的和的渐近展开问题]]当中1的做法，我们发现
$$S_n=\frac{1}{n}\sum_{k\leq n} \frac{1}{\sqrt{1+\frac{k}{n^2}}}$$但是这个方法注定**是失败的**。首先从误差分析的角度上来说，这个结果只能得到对$S_n$在$O(1/n)$级别的估计，因为我们如果用一个近似的黎曼和去替代原来的部分和，然后用积分得到一个结果，我们充其量不过是得到了$$a+O(1/n)$$的估计。这样的估计是没有办法达到我们的精度的。并且即便我们这里的渐近只要求$o(1)$,这个方法也不一定奏效，因为并不是每一个$S_n$都可以找到一个恰好的$S_n'$同时二者的误差是$O(1/n)$的，且$S_n'$恰好是一个简单的积分的黎曼和的形式。

### 3.Euler-Maclaurin求和公式





