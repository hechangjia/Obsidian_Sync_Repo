---
tags:
  - math
  - 数论
---

> [!命题1：调和数并非整数]
> 调和数$$H_n:=\sum_{k=1}^{n}\frac{1}{k}$$不是整数，当$n>1$的时候。

### 1. 思路1：从Bertrand postulate入手

首先是根据这样的一个结构，

> [!引理1]
> 如果$p$是一个素数，$a,b$皆为整数，并且$p$不是$b$的因子，那么$$\frac{1}{p}+\frac{a}{b}$$不会是一个整数。

这很容易从反证法中看出来，因为如果这是一个整数，那么$\frac{b}{p}+a$也得是整数，这就表明必然有$p|b$，但这和假设是矛盾的。

---
如果从Bertrand postulate的角度入手(参考[[Bertrand假设的证明]])，我们有办法把调和数写成引理1当中的形式。这是因为,在从1到n的自然数当中，$(\lfloor n/2\rfloor ,n]$中必然有一个素数,假设这个素数为$p$。

那么我们现在来考虑从1到n这些自然数的素因子:
1. $1\leq k <p$: 显然不可能含有p作为素因子。
2. $k=p$:唯一的素因子就是$p$。
3. $p<k\leq n$:也不可能含有素因子$p$，因为含有素因子$p$又比$p$更大的整数中，最小的一个就是$2p$,然而因为$p>n/2$，因此$2p>n$，所以不可能。
因此如果我们把$1/p$以外的$1/k$进行通分，我们就能把调和数改写为引理1当中的形式，因此我们可以得到结论，调和数不能是整数。

不过这里有一个疑问，证明中必须要依赖于Bertrand postulate这个1850年的结果吗？有没有更为初等的证明途径?

### 2. 思路2：改造引理1

引理1的证明思路也未必就一定需要使用素数，比如用$2^r$.我们假设$2^r$是$\{1,...,n\}$当中最大的形如2的幂次的自然数，那么：
1. $k<2^r$:自然不含有因子$2^r$
2. $2^r<k\leq n$：自然也不含有$2^r$的因子。因为含有$2^r$作为因子的并且比$2^r$更大的自然数当中最小的一个是$2^{r+1}$,但是这个数一定会大于$n$,否则就与$2^r$作为小于等于n的最大的形如2的幂次的假设矛盾。
回忆引理1当中的结果，我们完全可以把调和数$H_n$改写为$$H_n=\frac{1}{2^r}+\frac{a'}{b'}$$
这里$b'$是$\{1,...,n\}\setminus \{2^r\}$这些数的最小公倍数。那么此时$b'$因为求最小公倍数的那些元素当中最多的含有$r-1$个素因子2，因此作为最小公倍数的$b'$不会包含$2^r$.

如此一来便可以使用一样的逻辑去证明该命题，无非就是，如果$H_n$是一个整数，那么$b'H_n$必然也是，于是$2^r|b'$，但这是与假设矛盾的。

这种证明方法在逻辑上和思路1是一样的，但是并不需要借助Bertrand postulate。

### 3. 类似的问题

> [!命题2]
> $$A_n=\sum_{1\leq k\leq n}\frac{1}{2k+1}$$不是一个整数。

现在的集合是$S=\{3,..,2n+1\}$的元素的倒数和，显然这个命题就不能照搬2当中的一摸一样的证明，不过逻辑几乎是一致的。

我们可以考虑$3^r$,作为$S$当中最大的形如$3$的幂次的整数。那么除了$3^r$以外，再无含有$3^r$作为因子的包含在集合$S$当中的整数。于是我们可以把$A_n$改写为$$A_n = \frac{1}{3^r}+\frac{d}{c}$$其中$c$是集合$S$当中除去$3^r$以外的整数的最小公倍数，$c$中并不包含$3^r$作为因子。于是重复同样的逻辑，如果$A_n$是整数，那么$cA_n$也会是整数，从而$3^r|c$，这是矛盾的。

### 4. 总结思路

> [!上面方法的思路]
> 假设我们要证明有理数集合$A$上的和$S=\sum_{a\in A}a$并非整数，我们考虑选取一个特殊的素数$p$，使得$S$的p-adic valuation $\nu_p(S)<0$.这个特殊的$p$满足在$A$中存在一个唯一的非整数的有理数$a'$它的p-adic valuation比剩下的和整体的p-adic vluation还要小，即$$\nu_p(a')<\nu_p\left(S-a\right)$$如此一来便有$$\begin{aligned}\nu_p(S)&=\nu_p(a'+S-a')\\&=\min\{\nu_p(a'),\nu_p(S-a')\}\\&=\nu_p(a')<0\end{aligned}$$
> 因此$S$不会是整数。

关于p-adic valuation可以参照[[从二项式系数到Kummer定理]]当中1里面的定义。这里面涉及1当中提到的基本性质的3，4：3. 
* 如果$\nu_p(r)\geq 0$**对于任意素数$p$成立**，那么$r$一定是整数。相反，如果存在一个素数p使得$\nu_p(r)<0$那么自然这不会是一个整数。
* $\nu_p(r_1+r_2)\geq \min\{\nu_p(r_1),\nu_p(r_2)\}$如果$\nu_p(r_1)\neq \nu_p(r_2)$那么不等式会取等号。
#### 4.1 第一种思路的重新叙述

首先我们由bertrand postulate证明了在$(n/2,n]\cap \mathbb{Z}$当中会存在一个素数$p$,而这个素数的性质满足：$\frac{1}{p}$的在这个素数下的p-adic valuation是最小的，为-1.其余的有理数的总和$\frac{a}{b}$因为分母不含有$p$作为素因子，因此$\nu_p(a/b)=\nu_p(a)-\nu_p(b)=\nu_p(a)\geq 0$.因此$$\nu_p(1/p+a/b)=\nu_p(1/p)=-1<0$$
因此调和数并非整数。

#### 4.2 第二种思路的重新表述

总的来说我们考虑当$2^k\leq n<2^{k+1}$的情况下的2-adic valuation,这种情况下，这个特殊的有理数就是$\frac{1}{2^k}$。因为它的2-adic valuation最小，就是$-k$,其余的有理数的和$\frac{a'}{b'}$因为分母上$\nu_2(b')\leq k-1$,因此$\nu_2(a'/b')=\nu_2(a')-\nu_2(b')\geq -k+1$.所以最后$$\nu_2(H_n)=\nu_2(1/2^k + a'/b')=-k<0$$
因此调和数不是整数。

#### 4.3 命题2的重新表述

中的来说我们考虑的是当$3^k\leq 2n+1<3^{k+1}$的情况下的3-adic valuation,这种情况下，这个特殊的有理数就是$\frac{1}{3^k}$。因为它的3-adic valuation最小，就是$-k$,其余的有理数的和$\frac{d}{c}$因为分母上$\nu_3(b')\leq k-1$,因此$\nu_3(d/c)=\nu_3(d)-\nu_3(c)\geq -k+1$.所以最后$$\nu_3(H_n)=\nu_3(1/3^k + c/d)=-k<0$$
因此$A_n$不是整数。

#### 4.4 用这个思路来解决新的命题

> [!命题3]
> $k,n\in \mathbb{Z}^{+}$证明$$S_{n,k}=\frac{1}{k+1}+\cdots +\frac{1}{k+n}$$不是一个整数。

我们依旧去考虑$S_{n,k}$的2-adic vluation。不过按照之前的想法，我们要去找到一个唯一的2-adic vluation最小的这里面的被求和对象，那么我们旧需要讨论$k,n$的大小问题。毕竟例如$k=8,n=4$的情况下$$S_{8,4}=\frac{1}{9}+\frac{1}{10}+\frac{1}{11}+\frac{1}{12}$$当中并不包含我们想要的那种有理数。在搞清楚这种情况初现的条件之后，我们可以把问题分为两种情况. 因为如果假设$A_r:=[2^r,2^{r+1})\cap \mathbb{Z}$那么我们可以把整个自然数集写成$$\mathbb{N}=\cup_{r\geq 0}A_r$$然后令$B=\{k+1,...,k+n\}$,那么于是:
1. **存在一个$m$使得$B\subset A_m$**:
在这种情况下我们会发现$S_{n,k}<1$,因此不可能是整数，因为当$m>1$的时候$$S_{n,k}<\sum_{i=0}^{2^m-1}\frac{1}{2^m+i}<\frac{2^m}{2^m}<1$$这实际上就是上面$S_{8,4}$当中提到的情况。而$m=1$的时候实际上$B=\{2\}$,对应的求和只能是$S_{1,1}=\frac{1}{2}$结果显然不是整数。
2. **不存在任何$m$使得$B\subset A_m$**:
在这种情况下因为$B$的确是自然数的子集，所以它一定会和不止一个$A_r$的交集非空。在这种情况下，$B$实际上是连续$n$个自然数组成的集合，并且其中至少包含一个2的幂次的形式的正整数。假设其中最大的一个形如2的幂次的正整数为$2^{a}$,那么按照和之前的命题差不多的分析思路：

首先对于$S_{n,k}$当中排除$1/2^a$的分数进行通分，假设得到$\frac{d'}{c'}$,其中$c'$是$B$当中除了$2^a$以外的整数的最小公倍数。此处因为$B$当中比$2^a$更小的整数当中，不可能有某个整数当中也包含$2^a$的因子，而比$2^a$更大的含有$2^a$作为因子的整数至少是$2^{a+1}$，这又与$a$的假设矛盾，所以$c'$当中至多含有$a-1$个素因子2。

于是$$\nu_2(S_{n,k})=\nu_2(1/2^a+d'/c')=-a$$
综上所述，$S_{n,k}$不是一个整数。

### 5.计算p-adic valuation的代码

```wolfram
(*定义一个函数，计算有理数 x 关于素数 p 的 p-adic valuation*)
PadicValuation[x_, p_] := 
 Module[
 {num, den, numFactors,denFactors},
   (*获取分子和分母的质因数分解*)
   {num, den} = 
   If[IntegerQ[x], {x, 1}, Through[{Numerator, Denominator}[x]]];
  numFactors = FactorInteger[num];
  denFactors = FactorInteger[den];
  (*计算分子和分母中 p 的次数，并返回 p-adic valuation*)
  Total[Cases[numFactors, {p, exp_} :> exp]] - 
   Total[Cases[denFactors, {p, exp_} :> exp]]]
```

一些代码的解释：
1. **Through:** 
其里面可以完成把多个函数作用于同一个对象。比如这里我们需要在Through的位置返回形如{x的分子，x的分母}的形式的结果。于是我们使用
```wolfram
Through[{Numerator, Denominator}[x]]
```
其中Numerator以及Denominator是两个函数，这两个函数分别会计算一个自变量的分子和分母。为了方便理解，我们还可以模仿一下这个做法，譬如我们需要呈现"{Sin[x],Cos[x],Tan[x]}"我们可以用代码
```wolfram
Through[{Sin,Cos,Tan}[x]]
```
2. **Cases函数用于模式匹配**:
我们在numFactors或者denFactors当中得到的结果形如"{{2, 2}, {5, 2}}"然而我们需要在这样的对象当中找到属于素数p的指数，然后把这个指数给提取出来。于是在Mathematica当中给出了这样的规则:
```wolfram
{p, exp_} :> exp
```
意思就是，列表当中的对象中，每个形如p^k的形式的结果，那么我们要其中的指数exp。

