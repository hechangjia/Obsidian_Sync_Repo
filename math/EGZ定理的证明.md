---
tags:
  - math
  - 组合学
  - 数论
---

> [!Erdos_Ginzburg_ziv(1965)]
> 任意$2n-1$个整数(不要求不相同)当中一定存在$n$个整数其和可以被$n$整除。

当然我们可以抽象一点把EGZ定理写为:

> [!EGZ定理的版本2]
> $\{a_k\}_{k=1}^{2n-1}$是群$G=\mathbb{Z}/n\mathbb{Z}$中的一个序列，那么存在一个长度为$n$的子列，使得$$a_{i_1}+\cdots+a_{i_n}=0_G$$这种加法阿贝尔群当中的和为加法单位元的有限序列称之为sum-zero序列。那么EGZ定理可以叙述为，循环群$G$的任意长度为$2n-1$的序列中必然存在一个长度为$n$的sum-zero子列。


### 1. 经由Cauchy-Davenport引理的途径证明

#### 1.1 这个命题存在积性

这里我们采用版本2的叙述方式。这种证明的一个关键在于下面这个观察：

> [!命题1]
> 假设$G_1=\mathbb{Z}/a\mathbb{Z},G_2=\mathbb{Z}/b\mathbb{Z}$。如果EGZ定理的结论对$G_1,G_2$两个群成立，那么EGZ定理的结论对$G=G_1\oplus G_2$也成立。

这意味着，如果我们要证明EGZ的结论在任意的$G=\mathbb{Z}/n\mathbb{Z}$上成立，实际上我们只需要证明对于任意的群$\mathbb{Z}/p\mathbb{Z}$其中$p$是一个素数。因为由有限阿贝尔群的基本定理$$G\simeq \mathbb{Z}/p^{k_1}\mathbb{Z}\oplus \cdots \oplus\mathbb{Z}/p^{k_r}\mathbb{Z}$$我们一旦证明了EGZ的结论对任意$\mathbb{Z}/p\mathbb{Z}$成立，那么也就证明了这个性质对$G$的一个同构的群上成立。假设这个群为$H$，由$H$到$G$的同构映射为$\varphi$，于是$H$上的一个有限序列$\{b_k\}_{k=1}^{2n-1}$上存在一个长度为$n$的sum-zero子列满足$b_{i_1}+\cdots+b_{i_n}=0_H$。现在经由同构映射,我们可以构造$G$上的一个序列$\{a_k\}_{k=1}^{2n-1}$其中$a_k=\varphi(b_k)$，其存在一个子列$$a_{i_1}+\cdots+a_{i_n}=0_G$$这就是为何我们可以利用Cauchy-Davenport(参考[[Cauchy-Davenport及其证明]])来辅助证明EGZ定理，因为我们现在相当于在思考$\mathbb{Z}_p$上的子集的加法问题。所以这里首先说明EGZ定理的积性，证明命题1非常必要。

---
现在开始证明命题1，假设群$H=G_1\oplus G_2$。
* 假设$b=1$那么情况是平凡的：
因为$G_2=\mathbb{Z}/\mathbb{Z}$是一个平凡的群，仅有一个单位元$0_{G_2}$。此时假设群$H$当中有一个长度为$2ab-1=2a-1$的序列形如$(x_i,y_i)=(x_i,0_{G_2})$的序列$\mathcal{A}$，于是我们自然也可以得到一个群$G_1$当中的长度为$2a-1$的序列，那么由假设存在一个sum-zero的子列$$x_{i_1}+\cdots+x_{i_a}=0_{G_1}$$于是群$G$当中的序列$\mathcal{A}$中存在一个长度为a的sum-zero子列，因为$$\sum_{k=1}^{a}(x_{i_k},0_{G_2})=\left(\sum_{k=1}^{a}x_{i_k},0_{G_2}\right)=(0_{G_1},0_{G_2})=0_{H}$$
* 假设$b>1$：

$H$这个群当中的序列$\mathcal{A}$的长度为$2ab-1$形如$(x_i,y_i)$，而我们最后需要从中选出$ab$个元素来使得$\sum_i (x_i,y_i)=(0_{G_1},0_{G_2})$。

> [!基本想法]
> 我们已经知道$G_1,G_2$中分别有EGZ定理的性质。于是我们可以针对两个分量分别使用各自群当中的EGZ定理的结论找出sum-zero的子列。这里有一个技巧，我们不要去对$2ab-1$个元素一次性分出比如$b$个$2a-1$长度的子列，然后从每组中选择长度为$a$的sum-zero的子列。因为这样我们会“浪费”很多元素，导致最后留给别的分量的调整空间很小，最好是先选出长度为$a$的sum-zero子列，然后排除这$a$个，然后再选，如此重复下去，这样"利用率"比较高。

首先$2ab-1>2a-1$，那么由于在$G_1$中成立EGZ的结论于是我们能从$\mathcal{A}$当中挑出$a$个元素$(x_i,y_i)$使得第一个分量的和为$0_{G_1}$，写作$$x_{i_1}^{(1)}+\cdots+x_{i_a}^{(1)}=0_{G_1}$$现在让我们从序列$\mathcal{A}$中排除掉这$a$个元素，剩下的序列记作$A^{1}$,这个序列的长度依旧是大于$2a-1$的，因此还能找到第二组$a$个元素使得其第一个分量的和为$0_{G_1}$,记为$x_{i_1}^{(2)}+\cdots+x_{i_a}^{(2)}=0_{G_1}$。我们可以一直重复这个过程直到我们得到$2b-1$组元素，每组元素的第一个分量都有$x_{i_1}^{(j)}+\cdots+x_{i_a}^{(j)}=0_{G_1},1\leq j \leq 2b-1$。

那么我们现在实际上得到了$a(2b-1)$个$\mathcal{A}$中的元素，它们在$G$当中的和满足$$\sum_{j=1}^{2b-1}\sum_{k=1}^{a}(x_{i_k}^{(j)},y_{i_k}^{(j)})=\left(\sum_{j=1}^{2b-1}\sum_{k=1}^{a}x_{i_k}^{(j)},\sum_{j=1}^{2b-1}\sum_{k=1}^{a}y_{i_k}^{(j)}\right)=(0_{G_1},*)$$现在我们要从这长度为$a(2b-1)$的子列中找到$ab$个子列，使得他们的和的第二个分量是$0_{G_2}$。此处我们不能把$\sum_{k=1}^{a}x_{i_k}^{(j)}$拆开来，否则就顾此失彼，无法保证第一个分量的和为$0_{G_1}$了。此时观察到，实际上$\left\{\sum_{k=1}^{a}y_{i_k}^{(j)}\right\}_{j=1}^{2b-1}$是群$G_2$上的一列长度为$2b-1$的序列，那么由假设其中必然存在长度为$b$的sum-zero子列，记作$\left\{\sum_{k=1}^{a}y_{i_k}^{(j_r)}\right\}_{r=1}^{b}$。

那么现在我们就达成了我们的所有目的，因为$$\left\{\left(x_{i_k}^{(j_r)},y_{i_k}^{(j_r)}\right)\right\}$$这是$\mathcal{A}$当中一列长度为$ab$的子列，其和为$0_{G}$，因为:$$\sum_{r=1}^{b}\sum_{k=1}^{a}(x_{i_k}^{(j_r)},y_{i_k}^{(j_r)})=\left(\sum_{r=1}^{b}\sum_{k=1}^{a}x_{i_k}^{(j_r)},\sum_{r=1}^{b}\sum_{k=1}^{a}y_{i_k}^{(j_r)}\right)=(0_{G_1},0_{G_2})=0_H$$
于是便得到了$H$当中的EGZ结论。而因为由上面的分析，$G\simeq H$可以得到$G$当中也成立EGZ的结论，于是命题1便得到了证明。

#### 1.2 命题在素数$p$的情况下

经过1.1的分析，我们现在明白，要证明对任意的$\mathbb{Z}/n\mathbb{Z}$的EGZ定理，我们只需要证明在有限域$\mathbb{Z}/p\mathbb{Z}$上成立EGZ定理的结论，即:

> [!EGZ定理的素数版本]
> $\{a_k\}_{k=1}^{2p-1}$是群$G=\mathbb{Z}/p\mathbb{Z}$中的一个序列，那么存在一个长度为$p$的sum-zero子列。

这里我们不要使用原有的序列，而是可以对序列做一个重新排序，这样有利于我们进一步的分析。假设序列$\{b_k\}_{k=1}^{2p-1}$是根据问题中的序列重新排列而来的新序列，排列方式为按照每个元素所表示的整数模$p$的剩余类中的最小非负整数代表元的大小从小到大排列。也就是说，如果我们假设元素$b_k$的最小非负代表元为$b_k'$，那么此序列中一定有$$b_1'\leq \cdots \leq b_{2p-1}'$$这样是为了把原来的问题做一个转换。试想一下，如果某个$b_i'=b_{i+p-1}'$会怎么样？此时必然有$$b_i'=b_{i+1}'=\cdots=b_{i+p-1}'$$这样我们立刻就知道$b_i=\cdots=b_{i+p-1}$,而在$G=\mathbb{Z}/p\mathbb{Z}$中这种情况的初现意味着$\sum_{j=0}^{p-1}b_{i+j}=0_{G}$，于是我们立刻就找到了一个sum-zero子列。但是如此理想的现象并不一定会发生(可以说是罕见的)，下面这个代码可以直接生成许多并不满足这种理想情况的例子:
```wolfram
p = Prime[8];
integers = RandomSample[Range[-100, 100], 2*p - 1];
(*最后的这个group_Elements就是上面定义的b_k序列*)
groupElements = Mod[#, p] & /@ integers // Sort
(*如果觉得还不够直观可以再加一行*)
Tally[groupElements](*这行代码会告诉我们群当中每个元素被重复了多少次*)
```

那么假设我们现在把$\{b_k\}_{k=1}^{2p-1}$分为$p-1$组形如$(b_i,b_{i+p-1})$的元素对，最后单独剩下来一个$b_{2p-1}$出来。现在假设任何$b_i\neq b_{i+p-1}$，于是我们可以假设$A_i=\{b_i,b_{i+p-1}\}$这是一个由两个元素组成的集合。现在我们想到，如果集合$A=A_1+\cdots+A_{p-1}$是覆盖群$G$的，这就意味着对任意$a\in G$，我们都可以找到$A$中的一个元素使得二者相等，即$$a= b_{i_1}+\cdots+b_{i_{p-1}}$$这就已经非常接近了。毕竟如果我们令$a=0_G$的话，这等于说我们可以从$G$上的一个长度为$2p-1$的序列中找到$p-1$长度的sum-zero子列。但是这还不够强，因为我们要证明的是长度为$p$的sum-zero子列。不过我们显然可以做得更好，因为我们可以令$a=-b_{2p-1}$，这样我们就能得到$$b_{i_1}+\cdots+b_{i_{p-1}}+b_{2p-1}=0_G$$这就是$\{b_k\}_{k=1}^{2p-1}$中的长度为$p$的sum-zero子列，而因为$b_k$这个序列不过是$a_k$的重排，于是同样也是$\{a_k\}_{k=1}^{2p-1}$的长度为p的sum-zero子列。

所以所有事情都变成了这样一个问题：

> [!问题1]
> 是否$|A|\geq p$?如果$A = A_1+\cdots+A_{p-1}$,其中$A_i$是$\mathbb{Z}/p\mathbb{Z}$上的由两个元素构成的集合。

而这个问题实际上就是就是对应Cauchy-Davenport定理(参考[[Cauchy-Davenport及其证明]]),这个定理告诉我们这种集合的一个下界估计$$\begin{aligned}|A|&\geq \min\left\{p,\sum_{i=1}^{p-1}|A_i|-(p-2)\right\}\\&=\min\{p,p\}\\&=p  \end{aligned}$$所以这个问题是正确的，于是EGZ定理在任意素数$p$的情况下是正确的，那么由于命题1中证明的积性，于是EGZ定理是成立的。


### 2. 组合零点定理的途径

这里我们继续沿用1.1的思路，即EGZ定理存在积性，因此只需要证明其中的素数版本，即$\mathbb{Z}_p$上的长度为$2p-1$的序列存在长度为$p$的sum-zero子列。

其次沿用1.2的想法，对序列进行重排,整个证明围绕重排以后的序列展开。假设序列$\{b_k\}_{k=1}^{2p-1}$是根据问题中的序列重新排列而来的新序列，排列方式为按照每个元素所表示的整数模$p$的剩余类中的最小非负整数代表元的大小从小到大排列。同样的，如果存在某个$b_r$使得$$b_r = b_{r+p-1}$$那么问题直接就解决了(参考1.2的分析)。因此依旧是假设任意的$b_r,b_{r+p-1}$都是不同的。那么一样的考虑模式，$A_i:=\{b_i,b_{i+p-1}\},i\in \{1,...,p-1\}$，如同1.2一样，我们考虑$\sum_{i=1}^{p-1}A_i$是否能覆盖$\mathbb{Z}_p$不过我们的出发点确是不同。1.2中我们考虑的是$|\sum_{i=1}^{p-1}A_i|$的尺寸的估计，而我们现在要把这个问题单纯地考虑为存在性问题：

> [!问题2]
> 是否对于任意的$x \in \mathbb{Z}_p$都能从$x_i \in A_i$中各取出一个元素使得$$x_1+\cdots+x_{p-1}=x$$其中$A_i,i\in \{1,...,p-1\}$是$\mathbb{Z}_p$中的元素个数为2的子集。
> 

这样我们只需要故技重施，令$x = -b_{2p-1}$,这样就得到了序列$b_k$的一列长度为$p$的sum-zero子列。所以实际上我们用[[组合零点定理]]要解决的其实是问题2。

> [!证明的主要想法]
> 1. 首先这是一个存在性的问题，而结果可以写为是否存在$$(x_1,...,x_{p-1})\in A_1\times \cdots \times A_{p-1}$$使得等式$x_1+\cdots+x_{p-1}=x$成立。而我们知道这种等式就可以转换为多项式方程的零点，于是就可以借由组合零点定理反证。
> 2. 组合零点定理是说，如果我们现在有一个$\mathbb{Z}_p$上的多项式$f(x_1,...,x_n)$，其总次数为$1+\cdots+1=p-1$。并且其次数为$1+\cdots +1$的单项式系数不为0。那么其在集合$A_1\times \cdots \times A_{p-1}$当中不可能全取$0_{\mathbb{Z}_p}$。
> 3. 那么要想制造矛盾，我们就需要构造一个在$A_1\times \cdots \times A_{p-1}$上都是$0_{\mathbb{Z}_p}$的多项式，并且满足组合零点定理关于次数的要求。

最终我们的构造如下：
$$f(x_1,\cdots,x_n):=\prod_{a\in \mathbb{Z}_p}(x_1+\cdots+x_{p-1}-a)$$
这个多项式有这样的性质:
1. 这是一个域$\mathbb{Z}_p$上的多项式，其总次数为$1+\cdots+1=p-1$
2. 其次数为$1+\cdots +1$的单项式为$$(p-1)!x_1\cdots x_{p-1}$$而wilson定理告诉我们$(p-1)! =-1_{\mathbb{Z}_p}$,因此这一项的系数不为零。
于是我们便制造了一个矛盾，从而保证了问题2中的存在性，因此EGZ定理对任意素数成立（由1.1因此EGZ对任意正整数成立）。
